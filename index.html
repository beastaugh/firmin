<!DOCTYPE html>
<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Firmin, a JavaScript animation library using CSS transforms and transitions</title>
    
    <style type="text/css">
        body {
            margin:0;
            border:none;
            padding:16px 48px 48px;
            background:#fafafa;
            color:#404040;
            font-family:Helvetica, sans-serif;
            font-size:14px;
            line-height:1.5;
        }
        
        #wrapper {
            width:600px;
            margin:0 auto;
        }
        
        h1, h2, h3 {
            margin:0 0 12px 0;
            font-weight:bold;
        }
        
        h1 {
            font-family:"Times New Roman", Times, serif;
            font-size:30px;
            font-style:italic;
            font-weight:normal;
            text-align:center;
            padding-bottom:8px;
            border-bottom:1px solid #e5e5e5;
            margin-bottom:14px;
        }
        
        h2 {
            font-size:18px;
            margin-top:24px;
        }
        
        h3 {
            font-size:16px;
        }
        
        p {
            margin:0 0 12px 0;
        }
        
        a {
            background:#e5e5e5;
            color:#404040;
            text-decoration:underline;
        }
        
        a:hover {
            background:#a4cc64;
        }
        
        em {
            font-style:normal;
            font-weight:bold;
        }
        
        code, pre {
            font-family:Courier, monospace;
            font-size:14px;
        }
        
        code {
            background:#e5e5e5;
        }
        
        pre {
            margin:0 0 12px 0;
            border-width:1px 1px 1px 6px;
            border-style:solid;
            border-color:#e5e5e5;
            padding:6px 12px;
            background:#fff;
        }
        
        sup, sub {
            font-size:10px;
        }
        
        sup {
            vertical-align:super;
        }
        
        sub {
            vertical-align:sub;
        }
        
        .function {
            margin-bottom:36px;
        }
        
        .function h3 {
            margin-bottom:6px;
        }
        
        .function .signature code {
            font-size:14px;
            font-weight: normal;
        }
        
        #downloads ul {
            margin:0 0 12px 0;
            padding:0 0 0 20px;
        }
        
        #downloads li {
            margin:5px 0;
            padding:0;
            list-style:disc;
        }
        
        #footnotes ol {
            margin:0 0 12px 0;
            padding:0 0 0 20px;
        }
        
        #footnotes li {
            margin:5px 0;
            padding:0;
            list-style:decimal;
        }
    </style>
</head><body><div id="wrapper">
    
    <h1>Firmin</h1>
    
    
    <div id="introduction">
        <p>
            <a href="http://github.com/ionfish/firmin">Firmin</a> is a JavaScript
            animation library that uses CSS transforms and transitions to create
            smooth, hardware-accelerated animations.
        </p>
    </div>
    
    
    <div id="downloads">
        <h2>Downloads</h2>
        
        <p><small>Current version: <strong>0.1.3</strong>.</small></p>
        
        <ul>
            <li>
                <a href="build/firmin.js">Development version</a>
            </li>
            
            <li>
                <a href="build/firmin-min.js">Production version</a>
                <small>7.8kb packed, 2.2kb gzipped</small>
            </li>
        </ul>
    </div>
    
    
    <div id="usage">
        <h2>Using Firmin</h2>
        
        <p>
            Firmin&#8217;s API is not large, and mainly consists of convenience
            methods which make performing particular transforms easier. All of
            these methods are based on two core operations: the
            <code>animate</code> function and the <code>animate</code> method.
        </p>
        
        <p>
            The <code>animate</code> function takes three arguments: the
            element to be animated; a description of the animation to be run;
            and the duration of the animation. Durations can be given as a
            string ending in <code>s</code> (meaning a time in seconds) or
            <code>ms</code> (meaning milliseconds). They can also be given as
            plain numbers, in which case they are assumed to denote a time in
            seconds.
        </p>
        
        <pre>var box = document.getElementById("box");

Firmin.animate(box, {
    skew: {
        x: "45deg",
        y: "30deg"
    }
}, "2.1s");</pre>
        
        <p>
            It&#8217;s worth mentioning that any Firmin animation without a
            specified duration will be executed instantaneously&mdash;that is,
            the element will transition from its initial state to its final
            state with no visible intermediate states.
        </p>
        
        <p>
            The <code>animate</code> function returns an object with a
            complementary <code>animate</code> method. This method takes two
            arguments, an animation description and a duration, and will be
            applied to the same element. This allows animations to be chained,
            applying the transformations in sequence.
        </p>
        
        <pre>Firmin.animate(box, {
    translateX: "200px"
}, "1.6s").animate({
    translateY: "100px"
}, "0.8s");</pre>
        
        <p>
            There are a number of shortcut methods with the same names as the
            CSS transform functions. These provide a convenient way to perform
            single transformations without passing a verbose description to
            <code>animate</code>. Detailed documentation can be found in the
            <a href="#reference">reference</a>. All of Firmin&#8217;s objects
            and methods fall under the <code>Firmin</code> namespace.
        </p>
        
        <ul>
            <li><code>translate</code>, <code>translateX</code>,
                <code>translateY</code>;</li>
            <li><code>scale</code>, <code>scaleX</code>, <code>scaleY</code>;
            <li><code>rotate</code>;</li>
            <li><code>skew</code>, <code>skewX</code>, <code>skewY</code>;
            <li><code>matrix</code>.</li>
        </ul>
        
        <p>
            Aside from the transforms themselves, there is a further
            transform-related property which can be given in an animation
            description: the <code>origin</code> from which the transform
            will be performed. This should be supplied as an object with
            <code>x</code> and <code>y</code> properties (both CSS lengths).
        </p>
        
        <pre>Firmin.animate(box, {
    rotate: "1.5rad",
    origin: {x: "10%", y: 0}
}, "400ms");</pre>
        
        <p>
            CSS transitions will also animate other properties, not merely
            transforms. For example, one could animate the opacity, background
            colour or height of an element. CSS property names are given in
            camelCase as is usual when modifying them with JavaScript.
        </p>
        
        <pre>Firmin.animate(box, {
    opacity:         0.8,
    height:          "200px",
    backgroundColor: "#000"
}, 0.5);</pre>
    </div>
    
    
    <div id="relative">
        <h2>Relative transforms</h2>
        
        <p>
            Every animation function in Firmin has a complementary
            <em>relative</em> version; these can be used simply by appending an
            uppercase <code>R</code> to the function name, e.g.
            <code>Firmin.animateR</code> or <code>Firmin.translateXR</code>.
        </p>
        
        <p>
            When using a relative animation, any transform functions called
            will use the element&#8217;s current transformation matrix as a
            basis for the new transformation being generated, rather than the
            identity or origin matrix.
        </p>
        
        <p>
            For example, if one wanted to move an element 100 pixels to the
            right, and then return it to its original position, using
            Firmin&#8217;s normal, absolute animation functions one would write
            code like this:
        </p>
        
        <pre>Firmin.translateX(el, 100).translateX(el, 0);</pre>
        
        <p>
            In many contexts, this can be expressed more naturally using a
            relative transformation: move the element 100 pixels to the right,
            and then move it 100 pixels left to return it to its origin.
        </p>
        
        <pre>Firmin.translateX(el, 100).translateXR(el, -100);</pre>
        
        <p>
            Relative animations can be used at any time; Firmin maintains an
            internal list of previous animations which can be referred to when
            necessary, so one can call a series of absolute transforms and then
            a relative transform, or vice versa.
        </p>
    </div>
    
    
    <div id="operation-order">
        <h2>Operation order</h2>
        
        <p>
            <a href="http://en.wikipedia.org/wiki/Matrix_multiplication">Matrix multiplication</a>
            for non-<a href="http://en.wikipedia.org/wiki/Diagonal_matrix">diagonal</a>
            square matrices is not in general
            <a href="http://en.wikipedia.org/wiki/Commutativity">commutative</a>,
            so the order in which transforms are applied will affect the final
            state of the transform. Consider this CSS declaration:
        </p>
        
        <pre>transform: skew(15deg, 30deg) rotate(45deg);</pre>
        
        <p>
            This is <em>not</em> equivalent to the following declaration:
        </p>
        
        <pre>transform: rotate(45deg) skew(15deg, 30deg);</pre>
        
        <p>
            Firmin will respect the order of operations specified in an
            animation description, so one can write Firmin code that will
            produce the same outcome as the first CSS declaration above.
        </p>
        
        <pre>Firmin.animate(el, {
    skew: {x: "15deg", y: "30deg"},
    rotate: "45deg"
});</pre>
        
        <p>
            One could also use the relative transform functions to generate the
            same final transformation as the second example CSS declaration.
        </p>
        
        <pre>Firmin.rotateR("45deg").skewR({x: "15deg", y: "30deg"});</pre>
        
        <p>
            One caveat is necessary. Firmin is able to respect the order of
            operations specified in an animation description only because most
            widely-used JavaScript interpreters iterate over object properties
            (using a <code>for&hellip;in</code> loop) in the order that they
            those properties are declared, despite the fact that the
            JavaScript specification states that &#8220;The mechanics and order of
            enumerating the properties is not specified.&#8221;
        </p>
    </div>
    
    
    <div id="platforms">
        <h2>Supported platforms</h2>
        
        <p>
            Currently, the only supported platforms are those that use a recent
            version of the WebKit engine: <em>Safari 4</em>, <em>Mobile Safari</em>
            (i.e. iPhone and iPad) and <em>Google Chrome</em>. While CSS transforms
            and transitions are available for other browsers such as Opera 10.50
            and Firefox 3.7 (not yet released), their implementations are less than
            complete. The CSS transforms and transitions API is experimental, and
            varies between browsers. Once Firmin has reached a reasonable level of
            stability, an effort will be made to make it compatible with a wider
            range of browsers.
        </p>
        
        <h3>Hardware acceleration</h3>
        
        <p>
            One advantage of combining CSS transforms and transitions is that
            together they provide hardware-accelerated animation on
            WebKit-based browsers such as Safari on the Mac and Mobile Safari
            on the iPhone. Transitions which change the <code>opacity</code>
            property are also hardware accelerated on these platforms.
        </p>
    </div>
    
    
    <div id="transitions">
        <h2>Transition properties</h2>
        
        <p>
            The description object passed to the <code>animate</code> function
            allows for the customisation of the transition. The properties that
            can be used to do this are:
        </p>
        
        <ul>
            <li><code>properties</code></li>
            <li><code>timingFunction</code></li>
            <li><code>duration</code></li>
            <li><code>delay</code></li>
        </ul>
        
        <h3><code>properties</code></h3>
        
        <p>
            This allows for the filtering of properties which the transition
            will be applied to. It defaults to <code>"all"</code> and can be
            set to the string <code>"none"</code> or an array of CSS property
            names. It&#8217;s described in detail in the CSS Transitions Module
            specification <a href="http://www.w3.org/TR/css3-transitions/#the-transition-property-property-">section 2.1</a>.
        </p>
        
        <h3><code>duration</code></h3>
        
        <p>
            The time taken by the transition. It can be specified in either
            seconds (<code>"1.5s"</code>) or milliseconds (<code>"300ms"</code>).
            If a number is given, rather than a string, it will be interpreted
            as a value in seconds. Negative values are interpreted as
            <code>0</code>, i.e. executing immediately.
        </p>
        
        <h3><code>timingFunction</code></h3>
        
        <p>
            This allows for control over how intermediate values used during
            a transition will be calculated. It accepts the name of a timing
            function as a string, or an array of numbers to be passed to the
            <code>cubic-bezier</code> function. There are five timing functions
            defined in the spec: <code>ease</code>, <code>linear</code>,
            <code>ease-in</code>, <code>ease-out</code> and
            <code>ease-in-out</code>. The default is <code>ease</code>. See
            <a href="http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag">section 2.3</a>
            of the CSS Transitions Module specification for details.
        </p>
        
        
        <h3><code>delay</code></h3>
        
        <p>
            This accepts a time in the same way as <code>duration</code>, and
            specifies an interval to delay the execution of the transition by.
            Negative values will result in the transition executing immediately,
            but will begin part-way through the play cycle. This is explained
            further in <a href="http://www.w3.org/TR/css3-transitions/#the-transition-delay-property-">section 2.4</a>
            of the specification.
        </p>
    </div>
    
    
    <div id="units">
        <h2>Units</h2>
        
        <p>
            Most CSS properties, including transform functions and transition
            durations, have a magnitude and a unit. Angles are given in
            degrees, or radians; lengths in pixels or ems; times in seconds or
            milliseconds. In order to be as flexible as possible, Firmin
            accepts (with a couple of restrictions) the same CSS datatype
            values as a stylesheet. Keywords are not currently accepted as
            arguments to transform functions.
        </p>
        
        <h3>Angles</h3>
        
        <p>
            Angles can be given as strings in <em>radians</em> (e.g.
            <code>"2rad"</code>), <em>grads</em> (e.g. <code>"1grad"</code>),
            <em>turns</em> (e.g. <code>"0.5turn"</code>) and <em>degrees</em>
            (e.g. <code>"45deg"</code>). The default is degrees, so if you
            provide a number as an angle argument, it is assumed to be in
            degrees.
        </p>
        
        <h3>Lengths</h3>
        
        <p>
            Because lengths in CSS are generally relative to the current
            browser and operating system environment, Firmin only accepts
            <em>pixel</em> lengths, e.g. <code>"340px"</code> or
            <code>340</code>.
        </p>
        
        <h3>Times</h3>
        
        <p>
            Times can be given as strings in <em>seconds</em> (e.g.
            <code>"2s"</code>) or <em>milliseconds</em> (e.g.
            <code>"300ms"</code>). The default is seconds, so if you provide
            a numeric argument, Firmin will assume it is in seconds.
        </p>
    </div>
    
    
    <div id="reference">
        <h2>Reference</h2>
        
        <div class="function" id="animate">
            <h3>animate</h3>
            
            <p class="signature">
                <code>Firmin.animate(element, description, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>description</em> object describes the animation to be
                carried out. For example, this animation would move the element
                400 pixels to the right and double its height.
            </p>
            
            <pre>var el = document.getElementById("test"),
    tf = {
        translateX: 400,
        scaleY:     2
    };

Firmin.animate(el, tf);</pre>
            
            <p>
                Instead of using <em>animate</em> with a <code>transform</code>
                argument, one can use the transform functions directly. Each
                transform function (e.g. <em>translateX</em>, <em>skewY</em>)
                accepts a transform value as its second argument. This value is
                also what should be used in the <code>transform</code> object
                when calling <em>animate</em>. In other words,
            </p>
            
            <pre>Firmin.animate(el, {skewX: "1rad"});</pre>
            
            <p>is equivalent to</p>
            
            <pre>Firmin.skewX(el, "1rad");</pre>
            
            <p>
                The optional <code>duration</code> argument specifies the duration
                of the animation in seconds; the default value is <code>0</code>.
            </p>
            
            <p>
                A callback function can also be supplied. It will be executed when
                the animation is complete. For example, running the following would
                rotate the element through 135&deg; and then change its contents to
                the string "Hello, world" when the animation completed after 0.7
                seconds. Callbacks can be passed to all animation functions and
                methods.
            </p>
            
            <pre>Firmin.rotate(el, "135deg", "0.7s", function(elem) {
    elem.innerHTML = "Hello, world";
});</pre>
        </div>
        
        <div class="function" id="translate">
            <h3>translate</h3>
            
            <p class="signature">
                <code>Firmin.translate(element, translation, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>translation</em> object can have two properties: the
                <code>x</code> (horizontal) and <code>y</code> distances which
                the element should be translated by. Both distances must be
                numbers&mdash;the units are pixels. For example, this
                translation would move the element 200 pixels to the right and
                100 pixels upwards.
            </p>
            
            <pre>Firmin.translate(el, {
    x: 200,
    y: -100
});</pre>
        </div>
        
        <div class="function" id="translateX">
            <h3>translateX</h3>
            
            <p class"signature">
                <code>Firmin.translateX(element, horizontalMagnitude, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>magnitude</em> of the translation must be a number,
                representing the number of pixels the element is to be
                translated by along the horizontal axis. E.g., shifting it 50
                pixels to the left would be accomplished by:
            </p>
            
            <pre>Firmin.translateX(el, -50);</pre>
        </div>
        
        <div class="function" id="translateX">
            <h3>translateY</h3>
            
            <p class="signature">
                <code>Firmin.translateY(element, verticalMagnitude, [duration], [callback])</code>
            </h3>
            
            <p>
                Again, the <em>magnitude</em> of the translation is a number
                stating the number of pixels the element should be translated
                by along the vertical axis. To move it 40 pixels down:
            </p>
            
            <pre>Firmin.translateY(el, 40);</pre>
        </div>
        
        <div class="function" id="scale">
            <h3>scale</h3>
            
            <p class="signature">
                <code>Firmin.scale(element, magnitudes, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>magnitudes</em> object can have two properties: the
                <code>x</code> (horizontal) and <code>y</code> values which
                the element is to be scaled by. Changes of scale are pure
                magnitudes; they have no units. As such, they should be
                positive numbers. For example, to scale an element to twice its
                width and two-thirds of its height:
            </p>
            
            <pre>Firmin.scale(el, {
    x: 2,
    y: 2/3
});</pre>
        </div>
        
        <div class="function" id="scaleX">
            <h3>scaleX</h3>
            
            <p class="signature">
                <code>Firmin.scaleX(element, horizontalMagnitude, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>horizontal magnitude</em> by which the element should
                be scaled by must be a positive number. To scale an element to
                four times its width:
            </p>
            
            <pre>Firmin.scaleX(el, 4);</pre>
        </div>
        
        <div class="function" id="scaleY">
            <h3>scaleY</h3>
            
            <p class="signature">
                <code>Firmin.scaleY(element, verticalMagnitude, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>vertical magnitude</em> by which the element should be
                scaled by must be a positive number. To scale an element to
                half its height:
            </p>
            
            <pre>Firmin.scaleY(el, 0.5);</pre>
        </div>
        
        <div class="function" id="rotate">
            <h3>rotate</h3>
            
            <p class="signature">
                <code>Firmin.rotate(element, angle, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>angle</em> by which the element will be rotated can be
                specified as a string, in which case it will be parsed as a
                <a href="http://www.w3.org/TR/css3-values/#angles">CSS angle
                type</a> (i.e. <code>"2rad"</code>, <code>"45deg"</code>,
                <code>1grad</code>, <code>0.25turn</code>), or as a number, in
                which case it is assumed that the angle is given in degrees.
            </p>
        </div>
        
        <div class="function" id="skew">
            <h3>skew</h3>
            
            <p class="signature">
                <code>Firmin.skew(element, magnitudes, [duration], [callback])</code>
            </p>
            
            <p>
                A skew transformation along the X and Y axes is specified via a
                <em>magnitudes</em> object with two properties: the
                <code>x</code> and <code>y</code> angles by which the element
                will be skewed.
            </p>
            
            <pre>Firmin.skew(el, {
    x: "20deg",
    y: "1rad"
});</pre>
        </div>
        
        <div class="function" id="skewX">
            <h3>skewX</h3>
            
            <p class="signature">
                <code>Firmin.skewX(element, xAngle, [duration], [callback])</code>
            </p>
            
            <p>
                The element will be skewed along the X axis by the angle given.
            </p>
            
            <pre>Firmin.skewX(el, "45deg");</pre>
        </div>
        
        <div class="function" id="skewX">
            <h3>skewY</h3>
            
            <p class="signature">
                <code>Firmin.skewY(element, yAngle, [duration], [callback])</code>
            </p>
            
            <p>
                The element will be skewed along the Y axis by the angle given.
            </p>
            
            <pre>Firmin.skewY(el, "30deg");</pre>
        </div>
        
        <div class="function" id="matrix">
            <h3>matrix</h3>
            
            <p class="signature">
                <code>Firmin.matrix(element, vector, [duration], [callback])</code>
            </p>
            
            <p>
                The <em>vector</em> supplied expresses a two-dimensional
                <a href="http://www.w3.org/TR/SVG/coords.html#TransformMatrixDefined">transformation
                matrix</a>. As only six values of the matrix are needed to
                compute the transformation, the 3x3 matrix can be represented
                as a six-element vector.
            </p>
            
            <pre>Firmin.matrix(element, [3, 1, 0, 2, 1, 1]);</pre>
            
            <p>
                All other transformations can be represented in terms of a
                transformation matrix&mdash;this is what the library does
                internally.
            </p>
        </div>
    </div>
    
</div><body></html>
