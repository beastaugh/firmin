Firmin=(function(){var d={},g={},h={},i=(function(){var a=document.getElementsByTagName("head")[0],c=document.createElement("style");c.setAttribute("type","text/css");a.appendChild(c);return document.styleSheets[document.styleSheets.length-1]})();d.Transform=function(){this.operations={translate:[0,0],scale:[1,1],skew:['0deg','0deg'],rotate:['0deg'],matrix:[1,0,0,1,0,0]};return this};d.Transform.OPERATION_PATTERN=/((translate|scale|skew)(X|Y)?)|(rotate|matrix)/;d.Transform.create=function(a){var c=new d.Transform(),b;for(b in a){if(b.match(d.Transform.OPERATION_PATTERN)){c[b](a[b])}}return c};d.Transform.prototype.hash=function(){var a="",c;for(c in this.operations){a+="-"+this.operations[c].join("-").replace(/[^\w]/g,"_")}return a};d.Transform.prototype.build=function(){var a="-webkit-transform:",c="",b;for(b in this.operations){c+=" "+b+"("+this.operations[b].join(", ")+")"}return a+c+";"};d.Transform.prototype.save=function(){var a=this.hash(),c='firmin-transform-'+a,b=g[a];if(!b){b=this.build();g[a]=b;i.addRule('.'+c,b)}return c};d.Transform.prototype.exec=function(a){var c=a.className.replace(/\s*firmin-transform-[a-f0-9]+\s*/,''),b=this.save();a.className=(name.length>0?(name+' '):'')+b;return a};d.Transform.prototype.translate=function(a){var c=a.x,b=a.y,e=this.operations['translate'][0],f=this.operations['translate'][1];if(typeof c==='number'&&c!==0){c+='px'}if(typeof b==='number'&&b!==0){b+='px'}this.operations['translate']=[c||e,b||f]};d.Transform.prototype.translateX=function(a){this.translate({x:a})};d.Transform.prototype.translateY=function(a){this.translate({y:a})};d.Transform.prototype.scale=function(a){var c=this.operations['scale'][0],b=this.operations['scale'][1];this.operations['scale']=[a.x||c,a.y||b]};d.Transform.prototype.scaleX=function(a){this.scale({x:a})};d.Transform.prototype.scaleY=function(a){this.scale({y:a})};d.Transform.prototype.skew=function(a){var c=a.x,b=a.y,e=this.operations['skew'][0],f=this.operations['skew'][1];if(typeof c==='number'){c+='deg'}if(typeof b==='number'){b+='deg'}this.operations['skew']=[c||e,b||f]};d.Transform.prototype.skewX=function(a){this.skew({x:a})};d.Transform.prototype.skewY=function(a){this.skew({y:a})};d.Transform.prototype.rotate=function(a){if(typeof a==='number'){a+='deg'}this.operations['rotate']=[a]};d.Transform.prototype.matrix=function(a){this.operations['matrix']=a};d.transform=function(a,c){var b=d.Transform.create(c);b.exec(a)};d.Transition=function(){this.properties=['all'];this.duration=0;this.delay=0;this.timingFunction=null;this.transform=null;this.opacity=null;return this};d.Transition.prototype.hash=function(){var a="";a+="ps"+this.properties.join("-");a+="du"+this.duration;a+="de"+this.delay;if(this.timingFunction){a+="tf"+this.timingFunction}if(this.opacity){a+="op"+this.opacity}if(this.transform){a+="tr"+this.transform.hash()}a=a.replace(/[^\w]/g,"_");return a};d.Transition.prototype.build=function(){var a=[];a.push("-webkit-transition-property: "+this.properties.join(", "));a.push("-webkit-transition-duration: "+this.duration);a.push("-webkit-transition-delay: "+this.delay);if(this.timingFunction){a.push("-webkit-transition-timing_function: "+this.timingFunction)}if(this.opacity){a.push("opacity: "+this.opacity)}if(this.transform){a.push(this.transform.build())}return a.join("; ")+";"};d.Transition.prototype.save=function(){var a=this.hash(),c='firmin-transition-'+a,b=h[a];if(!b){b=this.build();h[a]=b;i.addRule('.'+c,b)}return c};d.Transition.prototype.exec=function(a){var c=a.className.replace(/\s*firmin-transition[a-f0-9]+\s*/,''),b=this.save();a.className=(name.length>0?(name+' '):'')+b;return a};d.animate=function(a,c,b){var e=new d.Transition();e.transform=d.Transform.create(c);e.duration=typeof b==='number'?b+"s":b;e.exec(a)};return d})();
